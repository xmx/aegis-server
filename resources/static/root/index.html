<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>下载</title>
    <style>
        body {
            background: #121212;
            color: #e6e6e6;
            font-family: sans-serif;
            margin: 0;
            height: 100vh;

            /* 居中核心：Flex + 水平/垂直居中 */
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            width: 320px;
            text-align: center;
        }

        h2 {
            color: #fafafa;
            margin-bottom: 28px;
        }

        select, button {
            display: block;
            width: 100%;
            padding: 10px;
            font-size: 16px;
            font-family: "IBM Plex Mono", Consolas, "Segoe UI", sans-serif;
            margin-top: 14px;

            border-radius: 6px;
            border: 1px solid #333;
            background: #1e1e1e;
            color: #e6e6e6;
        }

        button {
            cursor: pointer;
            background: #2b2b2b;
            border: 1px solid #444;
            transition: background 0.15s;
            margin-top: 22px;
        }

        button:hover {
            background: #3a3a3a;
        }
    </style>
</head>
<body>

<div class="container">
    <!-- 移除所有文本提示，仅保留选择框 -->
    <select id="os">
        <option value="linux">Linux</option>
        <option value="windows">Windows</option>
        <option value="darwin">macOS</option>
    </select>

    <select id="arch">
        <option value="amd64">amd64</option>
        <option value="arm64">arm64</option>
    </select>

    <button id="downloadBtn">下载</button>
</div>

<script>
    function detectOS() {
        const ua = navigator.userAgent.toLowerCase();
        if (ua.includes("windows")) return "windows";
        if (ua.includes("mac os") || ua.includes("darwin")) return "darwin";
        if (ua.includes("linux")) return "linux";
        return "linux";
    }

    function detectArch() {
        const ua = navigator.userAgent.toLowerCase();
        if (ua.includes("arm64") || ua.includes("aarch64")) return "arm64";
        return "amd64";
    }

    (function autoFill() {
        document.getElementById("os").value = detectOS();
        document.getElementById("arch").value = detectArch();
    })();

    document.getElementById("downloadBtn").onclick = function () {
        const os = document.getElementById("os").value;
        const arch = document.getElementById("arch").value;
        const url = `/api/agent-release?goos=${encodeURIComponent(os)}&goarch=${encodeURIComponent(arch)}`;
        window.location.href = url;
    };
</script>

</body>
</html>
