### 下载 agent 二进制程序
GET {{host}}/api/agent-release?id=6909eae156d2cd88047aaeb2

### 上传文件
POST {{host}}/api/agent-release
Content-Type: multipart/form-data; boundary=WebAppBoundary

--WebAppBoundary
Content-Disposition: form-data; name="file"; filename="aegis-agent_windows-arm64_v25.11.04-032143.exe"

< aegis-agent_windows-arm64_v25.11.04-032143.exe
--WebAppBoundary--


### 获取任务列表
@brokerId = www
@agentId = 122
GET https://{{host}}/api/reverse/broker/{{brokerId}}/api/reverse/{{agentId}}/api/tasks
Cache-Control: no-cache

### 下发任务
POST https://{{host}}/api/reverse/broker/{{brokerId}}/api/reverse/{{agentId}}/api/task/exec
Content-Type: application/json

{
  "name": "http-server",
  "code": "import console from 'console'\nimport time from 'time'\nimport url from 'net/url'\nimport http from 'net/http'\nimport httputil from 'net/http/httputil'\nconst target = url.parse('https://mirrors.zju.edu.cn/')\nconst proxy = httputil.newSingleHostReverseProxy(target)\nlet count = 0\nconst mux = http.newServeMux()\nmux.handleFunc('/', (w, r) => {\nw.header().set('Content-Type', 'text/html')\nw.write('<h1>HELLO</h1>')\ncount++\nconsole.log(`欢迎 ${r.remoteAddr}，网站总访问次数：${count}`)\n})\nconst opt = {addr: '0.0.0.0:8888', handler: mux, readTimeout: time.minute, readHeaderTimeout: 5 * time.second}\nconst handle = http.serve(opt)\nhandle.wait()"
}

### 结束任务
DELETE https://{{host}}/api/reverse/broker/{{brokerId}}/api/reverse/{{agentId}}/api/task/kill?pid=3


### 测试 SNI
GET https://lo.rust.wang:8443/api/reverse/broker/{{brokerId}}/api/reverse/{{agentId}}/api/tasks
